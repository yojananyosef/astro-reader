---
import ReaderLayout from "../features/reader/layouts/ReaderLayout.astro";
import ReaderContent from "../features/reader/components/ReaderContent.astro";
---

<ReaderLayout>
	<script is:inline>
		// Redirección a la última posición guardada de la Biblia
		if (!window.location.search) {
			try {
				const stored = localStorage.getItem('bible-last-position');
				if (stored) {
					const { lastBook, lastChapter } = JSON.parse(stored);
					if (lastBook && lastChapter) {
						window.location.replace(`/?book=${lastBook}&chapter=${lastChapter}`);
					}
				}
			} catch (e) {}
		}
	</script>
	<ReaderContent />
</ReaderLayout>