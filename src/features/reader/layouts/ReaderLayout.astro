---
import "../../../styles/dyslexia-theme.css";
---

<html lang="es">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <title>Biblia Accesible</title>
        <style is:inline>
            :root {
                --sidebar-offset-left: 0.5rem;
            }
        </style>
        <script is:inline>
            (function () {
                try {
                    var s = localStorage.getItem("reader-sidebar-collapsed");
                    var collapsed = s === "true";
                    document.documentElement.setAttribute(
                        "data-sidebar-collapsed",
                        collapsed ? "true" : "false",
                    );
                    var isDesktop = window.innerWidth >= 768;
                    var value = isDesktop ? "18rem" : "0.5rem";
                    document.documentElement.style.setProperty(
                        "--sidebar-offset-left",
                        value,
                    );
                    window.addEventListener(
                        "resize",
                        function () {
                            var isDesktop2 = window.innerWidth >= 768;
                            var v = isDesktop2 ? "18rem" : "0.5rem";
                            document.documentElement.style.setProperty(
                                "--sidebar-offset-left",
                                v,
                            );
                        },
                        { passive: true },
                    );
                } catch (e) {}
            })();
        </script>
    </head>
    <body>
        <script is:inline>
            (function () {
                try {
                    var defaultPrefs = {
                        theme: "light",
                        fontSize: 18,
                        lineHeight: 1.6,
                        letterSpacing: 0.02,
                        wordSpacing: 0.16,
                        fontFamily: "sans",
                    };

                    var stored = localStorage.getItem("bible-reader-prefs");
                    var prefs = stored
                        ? Object.assign({}, defaultPrefs, JSON.parse(stored))
                        : defaultPrefs;

                    var body = document.body;
                    body.setAttribute("data-theme", prefs.theme);
                    body.setAttribute("data-font", prefs.fontFamily);
                    body.style.setProperty(
                        "--font-size",
                        prefs.fontSize + "px",
                    );
                    body.style.setProperty("--line-height", prefs.lineHeight);
                    body.style.setProperty(
                        "--letter-spacing",
                        prefs.letterSpacing + "em",
                    );
                    body.style.setProperty(
                        "--word-spacing",
                        prefs.wordSpacing + "em",
                    );
                } catch (e) {
                    console.error("Error applying theme", e);
                }
            })();
        </script>
        <slot />
    </body>
</html>
